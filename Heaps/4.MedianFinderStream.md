
## find-median-from-data-stream


https://leetcode.com/problems/find-median-from-data-stream/description/?envType=study-plan-v2&envId=top-interview-150


# üìù Median Finder ‚Äî Revision Summary

The goal is to dynamically find the median of a stream of numbers **without sorting the entire list every time**.

## üìê Median Definition

- If count is **odd** ‚Üí median is the **middle number**
- If count is **even** ‚Üí median is the **average of two middle numbers**

---

## üí° Core Idea: Two Heaps Approach

Maintain two heaps:

- **Max Heap (Left Half)**: Keeps the smaller half of the numbers. Max element at the top.
- **Min Heap (Right Half)**: Keeps the larger half of the numbers. Min element at the top.

### Invariants:

- `maxHeap.count >= minHeap.count`
- All elements in `maxHeap` ‚â§ elements in `minHeap`

---

## üîÅ Insertion Strategy

1. Add the number to **maxHeap**
2. Move the **largest element** from `maxHeap` to `minHeap`
3. **Balance Heaps**:
   - If `maxHeap.count < minHeap.count`, move the **smallest element** from `minHeap` back to `maxHeap`

‚úÖ Examples
Even count:
Input = [5, 2, 3, 1, 6, 4]
Sorted = [1, 2, 3, 4, 5, 6]
Median = (3 + 4) / 2 = 3.5

Odd count:
Input = [10, 9, 11, 12, 2, 5, 7]
Sorted = [2, 5, 7, 9, 10, 11, 12]
Median = 9



```swift
class MedianFinder {
    
    var minHeap = Heap<Int>(priorityFunction: <)
    var maxHeap = Heap<Int>(priorityFunction: >)

    init() {
        
    }
    
    func addNum(_ num: Int) {
        maxHeap.insert(num)
        
        if let top = maxHeap.delete() {
            minHeap.insert(top)
        }
        
        if minHeap.count > maxHeap.count {
            if let top = minHeap.delete() {
                maxHeap.insert(top)
            }
        }
        
    }
    
    func findMedian() -> Double {
        if minHeap.count == maxHeap.count {
            if let num1 = minHeap.topElement, let num2 = maxHeap.topElement {
                return (Double(num1)+Double(num2))/2
            } else {
                return -1
            }
        } else {
            return Double(maxHeap.topElement ?? 0)
        }
    }
}

```